(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-73d403e7"],{4782:function(t,e,a){},"655a":function(t,e,a){"use strict";a("4782")},"9d08":function(t,e,a){},dd0a:function(t,e,a){"use strict";a("9d08")},f86a:function(t,e,a){"use strict";a.r(e);var o=function(){var t=this,e=t._self._c;return e("div",{staticClass:"mainBox"},[e("el-tabs",{on:{"tab-click":t.handleClick},model:{value:t.activeName,callback:function(e){t.activeName=e},expression:"activeName"}},[e("el-tab-pane",{attrs:{label:"基本信息",name:"second"}},[e("baseInfo",{on:{goCondition:t.goCondition}})],1),e("el-tab-pane",{attrs:{label:"任务条件",name:"first"}},[e("versionInfo")],1)],1)],1)},i=[],l=function(){var t=this,e=t._self._c;return e("div",{staticClass:"mainBox"},[t.loading?e("el-skeleton",{attrs:{animated:""}}):e("el-collapse",{model:{value:t.Collapse,callback:function(e){t.Collapse=e},expression:"Collapse"}},[e("el-collapse-item",{attrs:{name:"1"}},[e("template",{slot:"title"},[e("div",{staticClass:"collpTitle"},[t._v("详细信息")])]),e("div",{staticClass:"mainRow"},t._l(t.tabData,(function(a,o){return e("div",{key:o,staticClass:"itemRow",on:{click:function(e){return t.goCondition(a.title)}}},[e("div",{staticClass:"title"},[t._v(t._s(a.title))]),"任务描述"==a.title?e("div",{staticStyle:{"padding-left":"30px"},domProps:{innerHTML:t._s(t.baseData[a.content])}}):e("div",{staticClass:"content"},[t._v(t._s(t.baseData[a.content]))])])})),0)],2)],1)],1)},n=[],s=(a("365c"),{data(){return{tabData:[{title:"任务名称",content:"taskName"},{title:"任务类型",content:"taskType"},{title:"任务表达式",content:"taskCorn"},{title:"任务描述",content:"taskDescription"},{title:"关联模型",content:"procName"},{title:"关联数据表",content:"taskName"},{title:"当前状态",content:"taskStatus"},{title:"运行次数",content:"taskDetailCount"},{title:"创建人",content:"createUserName"},{title:"创建时间",content:"createAt"},{title:"修改人",content:"updateUserName"},{title:"修改时间",content:"updateAt"}],tabDataSys:[],Collapse:[],baseData:{},loading:!1}},mounted(){this.getProcDetail()},created(){},methods:{getProcDetail(){this.loading=!0;const t={id:this.$route.params.data.taskId};this.$service.getTaskById(t).then(t=>{if(t&&200==t.code){const{data:e}=t;this.baseData=this.transform(e),this.Collapse=["1","2"]}this.loading=!1}).catch(t=>{this.loading=!1,console.log(t)})},goCondition(t){},transform(t){const e=JSON.parse(localStorage.getItem("Dictionary")),a=JSON.parse(localStorage.getItem("DictionaryVal"));let o=e.filter(t=>"任务类型"==t.dicName);o=o[0];const i=a.filter(e=>e.dicCode==o.dicCode&&e.value==t.taskType);i.length&&(o=i[0].label),t.taskType=o;let l=e.filter(t=>"任务状态"==t.dicName);l=l[0];const n=a.filter(e=>e.dicCode==l.dicCode&&e.value==t.taskStatus);return n.length&&(l=n[0].label),t.taskStatus=l,t}}}),r=s,c=(a("655a"),a("0c7c")),d=Object(c["a"])(r,l,n,!1,null,"3c3aa770",null),p=d.exports,m=function(){var t=this,e=t._self._c;return e("div",{staticClass:"mainBox"},[e("el-form",{staticClass:"demo-form-inline",attrs:{inline:!0,model:t.formInline}},[e("el-form-item",[e("div",[t._v(" "+t._s(this.taskConditionTypeName?this.taskConditionTypeName:"无条件")+" : "+t._s(this.$route.params.data.taskConditionCorn?this.$route.params.data.taskConditionCorn:"无")+" ")])])],1),e("el-table",{staticClass:"versionTab",staticStyle:{width:"100%"},attrs:{data:t.tableData,height:t.tableHeight}},[e("el-table-column",{attrs:{label:"序号",type:"index",width:"50"}}),e("el-table-column",{attrs:{label:"字段标签",align:"center",width:"310",prop:"column"}}),e("el-table-column",{attrs:{label:"运算符",align:"center",prop:"type"}}),e("el-table-column",{attrs:{label:"值",align:"center",prop:"value",width:"150"}})],1),e("div",{staticClass:"main-content-footer"},[e("el-pagination",{directives:[{name:"show",rawName:"v-show",value:t.total>0,expression:"total > 0"}],staticClass:"pagina",attrs:{total:t.total,page:t.pageNum,limit:t.pageSize},on:{"update:page":function(e){t.pageNum=e},"update:limit":function(e){t.pageSize=e},pagination:t.getVersion}})],1),e("el-dialog",{attrs:{title:t.boxTitle,visible:t.dialogFormVisible},on:{"update:visible":function(e){t.dialogFormVisible=e}}},[e("el-form",{attrs:{model:t.form}},[e("el-form-item",{staticStyle:{"margin-left":"0px"},attrs:{label:"编程模式","label-width":t.formLabelWidth}},[e("el-select",{attrs:{placeholder:"请选择编程模式"},model:{value:t.form.proctype,callback:function(e){t.$set(t.form,"proctype",e)},expression:"form.proctype"}},t._l(t.typeOptions,(function(t){return e("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),1)],1),e("el-form-item",{staticStyle:{"margin-left":"0px"},attrs:{label:"模型名称","label-width":t.formLabelWidth}},[e("el-input",{staticStyle:{width:"215px"},attrs:{placeholder:"请输入模型名称",autocomplete:"off"},model:{value:t.form.proccnname,callback:function(e){t.$set(t.form,"proccnname",e)},expression:"form.proccnname"}})],1),e("el-form-item",{staticClass:"desBox",staticStyle:{"margin-left":"0px"},attrs:{label:"模型描述","label-width":t.formLabelWidth}},[e("quill-editor",{ref:"myQuillEditor",staticClass:"contentBox",attrs:{options:t.editorOption},model:{value:t.content,callback:function(e){t.content=e},expression:"content"}})],1)],1),e("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[e("el-button",{attrs:{size:"medium"},on:{click:function(e){t.dialogFormVisible=!1}}},[t._v("取 消")]),e("el-button",{attrs:{size:"medium",type:"primary"},on:{click:t.confirm}},[t._v("确 定")])],1)],1)],1)},u=[],h=(a("14d9"),a("cf45")),f={data(){return{tableData:[],taskConditionTypeName:"",total:10,pageNum:1,tableHeight:window.innerHeight-286,pageSize:10,formInline:{},typeOptions:[],getLoading:!1,activeName:"second",dialogFormVisible:!1,boxTitle:"复制模型",form:{proccnname:"",proctype:""},formLabelWidth:"70px",editorOption:{modules:{toolbar:[["bold","italic","underline","strike"],["blockquote","code-block","image"]]},placeholder:"请输入模型描述"},content:""}},mounted(){this.getVersion(),this.getDir(),this.$nextTick(()=>{const t=["ca-header","main-content-footer","el-table__header-wrapper","el-form demo-form-inline ","el-tabs__header","breadCrumb"];this.tableHeight=Object(h["c"])(t)-40-16-10-85-50})},updated(){this.$nextTick(()=>{const t=["ca-header","main-content-footer","el-table__header-wrapper","el-form demo-form-inline ","el-tabs__header","breadCrumb"];this.tableHeight=Object(h["c"])(t)-40-16-10-85-50})},methods:{getVersion(){this.getLoading=!0,this.tableData=JSON.parse(this.$route.params.data.taskConditionJson);const t=JSON.parse(localStorage.getItem("DictionaryVal"));let e=t.filter(t=>"ct"==t.dicCode);this.$route.params.data.taskConditionType&&(this.taskConditionTypeName=e[this.$route.params.data.taskConditionType].label),this.getLoading=!1},confirm(){this.getLoading=!0;this.form.proccnname,this.form.proctype,this.content,this.copyId},transform(t){const e=JSON.parse(localStorage.getItem("Dictionary")),a=JSON.parse(localStorage.getItem("DictionaryVal"));let o=e.filter(t=>"模型类型"==t.dicName);o=o[0];const i=a.filter(e=>e.dicCode==o.dicCode&&e.value==t.proctype);i.length&&(o=i[0].label),t.proctype=o;let l=e.filter(t=>"模型状态"==t.dicName);l=l[0];const n=a.filter(e=>e.dicCode==l.dicCode&&e.value==t.state);return n.length&&(l=n[0].label),t.state=l,t},copy(t){const{proccnname:e,proctype:a,remark:o,xmlid:i}=t;this.form.proctype=this.getTypeValue(a),this.form.proccnname=e,this.content=o,this.copyId=i,this.boxTitle="复制模型",this.dialogFormVisible=!0},getTypeValue(t){const e=this.typeOptions.filter(e=>e.label==t);return e[0].value},goCustom(t){const{proctype:e}=t,a=this.typeOptions.findIndex(t=>t.label==e);switch(a){case 0:this.$router.push({name:"program-graph",params:{id:t.xmlid,procName:t.procName,proccnname:t.proccnname}});break;case 1:this.$router.push({path:"/custom",query:{procName:t.procName,procType:this.typeOptions[a].value}});break;case 2:this.$router.push({path:"/custom",query:{procName:t.procName,procType:this.typeOptions[a].value}});break;default:console.log("route");break}},getDir(){const t=JSON.parse(localStorage.getItem("Dictionary")),e=JSON.parse(localStorage.getItem("DictionaryVal"));let a=t.filter(t=>"模型类型"==t.dicName);a=a[0],this.typeOptions=e.filter(t=>t.dicCode==a.dicCode)}}},b=f,g=(a("dd0a"),Object(c["a"])(b,m,u,!1,null,"42d1a392",null)),y=g.exports,v={data(){return{total:10,pageNum:1,pageSize:10,rollBackVisible:!1,formInline:{version:""},activeName:"second"}},mounted(){},components:{baseInfo:p,versionInfo:y},methods:{handleClick(t,e){console.log(t,e)},goCondition(){this.activeName="first"}}},C=v,k=Object(c["a"])(C,o,i,!1,null,"3472d855",null);e["default"]=k.exports}}]);