(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2370774c","chunk-41ea5b8a"],{"2f5e":function(t,e,a){"use strict";a("9aff")},7332:function(t,e,a){"use strict";a.r(e);var o=function(){var t=this,e=t._self._c;return e("div",{staticClass:"mainBox"},[e("el-tabs",{on:{"tab-click":t.handleClick},model:{value:t.activeName,callback:function(e){t.activeName=e},expression:"activeName"}},[e("el-tab-pane",{attrs:{label:"基本信息",name:"second"}},[e("baseInfo")],1),e("el-tab-pane",{attrs:{label:"版本信息",name:"first"}},[e("versionInfo")],1)],1)],1)},l=[],i=a("7b77"),n=function(){var t=this,e=t._self._c;return e("div",{staticClass:"mainBox"},[e("el-form",{staticClass:"demo-form-inline",attrs:{inline:!0,model:t.formInline}},[e("el-form-item",{attrs:{label:"版本号"}},[e("el-select",{attrs:{placeholder:"请选择版本号"},model:{value:t.formInline.version,callback:function(e){t.$set(t.formInline,"version",e)},expression:"formInline.version"}},[e("el-option",{attrs:{label:"V10",value:"10"}}),e("el-option",{attrs:{label:"V9",value:"9"}}),e("el-option",{attrs:{label:"V8",value:"8"}}),e("el-option",{attrs:{label:"V7",value:"7"}}),e("el-option",{attrs:{label:"V6",value:"6"}}),e("el-option",{attrs:{label:"V5",value:"5"}}),e("el-option",{attrs:{label:"V4",value:"4"}}),e("el-option",{attrs:{label:"V3",value:"3"}}),e("el-option",{attrs:{label:"V2",value:"2"}}),e("el-option",{attrs:{label:"V1",value:"1"}})],1)],1),e("el-form-item",[e("div",{staticClass:"btnTab"},[e("el-button",{attrs:{type:"primary",size:"medium",loading:t.getLoading},on:{click:t.onSubmit}},[t._v("查询")]),e("el-button",{attrs:{size:"medium"},on:{click:t.reset}},[t._v("重置")])],1)])],1),e("el-table",{staticClass:"versionTab",staticStyle:{width:"100%"},attrs:{data:t.tableData,height:t.tableHeight}},[e("el-table-column",{attrs:{label:"序号",type:"index",width:"50"}}),e("el-table-column",{attrs:{label:"模型编号",align:"center",width:"310",prop:"procName"}}),e("el-table-column",{attrs:{label:"模型名称",align:"center",prop:"proccnname"}}),e("el-table-column",{attrs:{label:"模型类型",align:"center",prop:"proctype",width:"150"}}),e("el-table-column",{attrs:{label:"创建人",align:"center",prop:"curdutyer"}}),e("el-table-column",{attrs:{label:"创建时间",align:"center",width:"200",prop:"createAt"}}),e("el-table-column",{attrs:{label:"状态",align:"center",width:"100",prop:"state"}}),e("el-table-column",{attrs:{label:"版本号",align:"center",width:"100",prop:"verseq"}}),e("el-table-column",{attrs:{prop:"action",align:"center",label:"操作",width:"150"},scopedSlots:t._u([{key:"default",fn:function(a){return[e("el-button",{attrs:{type:"text"},on:{click:function(e){return t.goCustom(a.row)}}},[t._v("查看")]),e("el-button",{attrs:{type:"text"},on:{click:function(e){return t.copy(a.row)}}},[t._v("复制")])]}}])})],1),e("div",{staticClass:"main-content-footer"},[e("el-pagination",{directives:[{name:"show",rawName:"v-show",value:t.total>0,expression:"total > 0"}],staticClass:"pagina",attrs:{total:t.total,page:t.pageNum,limit:t.pageSize},on:{"update:page":function(e){t.pageNum=e},"update:limit":function(e){t.pageSize=e},pagination:t.getVersion}})],1),e("el-dialog",{attrs:{title:t.boxTitle,visible:t.dialogFormVisible},on:{"update:visible":function(e){t.dialogFormVisible=e}}},[e("el-form",{attrs:{model:t.form}},[e("el-form-item",{staticStyle:{"margin-left":"0px"},attrs:{label:"编程模式","label-width":t.formLabelWidth}},[e("el-select",{attrs:{placeholder:"请选择编程模式"},model:{value:t.form.proctype,callback:function(e){t.$set(t.form,"proctype",e)},expression:"form.proctype"}},t._l(t.typeOptions,(function(t){return e("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),1)],1),e("el-form-item",{staticStyle:{"margin-left":"0px"},attrs:{label:"模型名称","label-width":t.formLabelWidth}},[e("el-input",{staticStyle:{width:"215px"},attrs:{placeholder:"请输入模型名称",autocomplete:"off"},model:{value:t.form.proccnname,callback:function(e){t.$set(t.form,"proccnname",e)},expression:"form.proccnname"}})],1),e("el-form-item",{staticClass:"desBox",staticStyle:{"margin-left":"0px"},attrs:{label:"模型描述","label-width":t.formLabelWidth}},[e("quill-editor",{ref:"myQuillEditor",staticClass:"contentBox",attrs:{options:t.editorOption},model:{value:t.content,callback:function(e){t.content=e},expression:"content"}})],1)],1),e("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[e("el-button",{attrs:{size:"medium"},on:{click:function(e){t.dialogFormVisible=!1}}},[t._v("取 消")]),e("el-button",{attrs:{size:"medium",type:"primary"},on:{click:t.confirm}},[t._v("确 定")])],1)],1)],1)},s=[],r=(a("14d9"),a("cf45")),c={data(){return{tableData:[],total:10,pageNum:1,tableHeight:window.innerHeight-286,pageSize:10,formInline:{version:""},typeOptions:[],getLoading:!1,activeName:"second",dialogFormVisible:!1,boxTitle:"复制模型",form:{proccnname:"",proctype:"",procName:""},formLabelWidth:"70px",editorOption:{modules:{toolbar:[["bold","italic","underline","strike"],["blockquote","code-block","image"]]},placeholder:"请输入模型描述"},content:""}},mounted(){this.getVersion(),this.getDir(),this.$nextTick(()=>{const t=["ca-header","main-content-footer","el-table__header-wrapper","el-form demo-form-inline ","el-tabs__header","breadCrumb"];this.tableHeight=Object(r["c"])(t)-40-16-10-85-50})},updated(){this.$nextTick(()=>{const t=["ca-header","main-content-footer","el-table__header-wrapper","el-form demo-form-inline ","el-tabs__header","breadCrumb"];this.tableHeight=Object(r["c"])(t)-40-16-10-85-50})},methods:{getVersion(){this.getLoading=!0;var t=[{column:"procName",type:"eq",value:this.$route.params.procName?this.$route.params.procName:sessionStorage.getItem("procName")}];this.formInline.version&&t.push({column:"verseq",type:"eq",value:this.formInline.version}),t=encodeURIComponent(JSON.stringify(t));const e=new URLSearchParams({pageNum:this.pageNum,pageSize:this.pageSize}).toString(),a=`/system/proc/listPage?${e}&condition=${t}`;this.$http.get(a,{}).then(t=>{t&&200==t.code&&(this.tableData=t.data.records.map(t=>this.transform(t)),console.log(this.tableData),this.total=t.data.total)}).catch(t=>{console.log(t)}).finally(()=>{this.getLoading=!1})},confirm(){this.getLoading=!0;const t={...this.form,remark:this.content,xmlid:this.copyId};this.$service.copyVersion(t).then(t=>{200==t.code&&(this.$suc("复制成功"),this.getVersion())}).catch(t=>{console.log(t)}).finally(()=>{this.resetDia()})},transform(t){const e=JSON.parse(localStorage.getItem("Dictionary")),a=JSON.parse(localStorage.getItem("DictionaryVal"));let o=e.filter(t=>"模型类型"==t.dicName);o=o[0];const l=a.filter(e=>e.dicCode==o.dicCode&&e.value==t.proctype);l.length&&(o=l[0].label),t.proctype=o;let i=e.filter(t=>"模型状态"==t.dicName);i=i[0];const n=a.filter(e=>e.dicCode==i.dicCode&&e.value==t.state);return n.length&&(i=n[0].label),t.state=i,t},onSubmit(){this.getVersion()},reset(){this.formInline.version="",this.pageNum=1,this.getVersion()},copy(t){const{proccnname:e,proctype:a,remark:o,xmlid:l,procName:i}=t;this.form.proctype=this.getTypeValue(a),this.form.procName=i,this.form.proccnname=e,this.content=o,this.copyId=l,this.boxTitle="复制模型",this.dialogFormVisible=!0},getTypeValue(t){const e=this.typeOptions.filter(e=>e.label==t);return e[0].value},goCustom(t){const{proctype:e}=t,a=this.typeOptions.findIndex(t=>t.label==e);switch(a){case 0:this.$router.push({name:"program-graph",params:{id:t.xmlid,procName:t.procName,proccnname:t.proccnname}});break;case 1:this.$router.push({path:"/custom",query:{procName:t.procName,procType:this.typeOptions[a].value}});break;case 2:this.$router.push({path:"/custom",query:{procName:t.procName,procType:this.typeOptions[a].value}});break;default:console.log("route");break}},getDir(){const t=JSON.parse(localStorage.getItem("Dictionary")),e=JSON.parse(localStorage.getItem("DictionaryVal"));let a=t.filter(t=>"模型类型"==t.dicName);a=a[0],this.typeOptions=e.filter(t=>t.dicCode==a.dicCode)}}},p=c,m=(a("2f5e"),a("0c7c")),d=Object(m["a"])(p,n,s,!1,null,"29197da6",null),u=d.exports,b={data(){return{total:10,pageNum:1,pageSize:10,rollBackVisible:!1,formInline:{version:""},activeName:"second"}},mounted(){},components:{baseInfo:i["default"],versionInfo:u},methods:{handleClick(t,e){console.log(t,e)}}},h=b,f=Object(m["a"])(h,o,l,!1,null,"59dba837",null);e["default"]=f.exports},"7b77":function(t,e,a){"use strict";a.r(e);var o=function(){var t=this,e=t._self._c;return e("div",{staticClass:"mainBox"},[e("el-collapse",{model:{value:t.Collapse,callback:function(e){t.Collapse=e},expression:"Collapse"}},[e("el-collapse-item",{attrs:{name:"1"}},[e("template",{slot:"title"},[e("div",{staticClass:"collpTitle"},[t._v("基本信息")])]),e("div",{staticClass:"mainRow"},t._l(t.tabData,(function(a,o){return e("div",{key:o,staticClass:"itemRow"},[e("div",{staticClass:"title"},[t._v(t._s(a.title))]),"模型描述"==a.title?e("div",{staticStyle:{"padding-left":"30px"},domProps:{innerHTML:t._s(t.baseData[a.content])}}):e("div",{staticClass:"content"},[t._v(t._s(t.baseData[a.content]))])])})),0)],2),e("el-collapse-item",{attrs:{name:"2"}},[e("template",{slot:"title"},[e("div",{staticClass:"collpTitle"},[t._v("系统信息")])]),e("div",{staticClass:"mainRow"},t._l(t.tabDataSys,(function(a,o){return e("div",{key:o,staticClass:"itemRow"},[e("div",{staticClass:"title"},[t._v(t._s(a.title))]),e("div",{staticClass:"content"},[t._v(t._s(t.baseData[a.content]))])])})),0)],2)],1)],1)},l=[],i={data(){return{tabData:[{title:"模型名称",content:"proccnname"},{title:"模型编号",content:"procName"},{title:"编程模式",content:"proctype"},{title:"当前状态",content:"state"},{title:"当前版本",content:"verseq"},{title:"模型描述",content:"remark"}],tabDataSys:[{title:"创建人",content:"curdutyer"},{title:"创建时间",content:"createAt"},{title:"修改人",content:"curdutyer"},{title:"修改时间",content:"updateAt"}],Collapse:[],baseData:{}}},mounted(){this.getProcDetail()},created(){this.$route.params.id||(this.$route.params.id=sessionStorage.getItem("id"))},methods:{getProcDetail(){const t={id:this.$route.params.id};this.$service.getProcDetail(t).then(t=>{if(t&&200==t.code){const{data:e}=t;this.baseData=this.transform(e),this.Collapse=["1","2"]}}).catch(t=>{console.log(t)})},transform(t){const e=JSON.parse(localStorage.getItem("Dictionary")),a=JSON.parse(localStorage.getItem("DictionaryVal"));let o=e.filter(t=>"模型类型"==t.dicName);o=o[0];const l=a.filter(e=>e.dicCode==o.dicCode&&e.value==t.proctype);l.length&&(o=l[0].label),t.proctype=o;let i=e.filter(t=>"模型状态"==t.dicName);i=i[0];const n=a.filter(e=>e.dicCode==i.dicCode&&e.value==t.state);return n.length&&(i=n[0].label),t.state=i,t}}},n=i,s=(a("d6a0"),a("0c7c")),r=Object(s["a"])(n,o,l,!1,null,"dc37f518",null);e["default"]=r.exports},8534:function(t,e,a){},"9aff":function(t,e,a){},d6a0:function(t,e,a){"use strict";a("8534")}}]);