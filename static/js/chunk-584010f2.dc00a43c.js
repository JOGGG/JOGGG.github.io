(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-584010f2"],{c779:function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e._self._c;return t("div",{staticClass:"mainBox"},[t("el-form",{staticClass:"demo-form-inline",attrs:{inline:!0,model:e.formInline}},[t("el-form-item",{attrs:{label:"开始日期"}},[t("el-date-picker",{attrs:{type:"date",placeholder:"选择日期"},model:{value:e.formInline.startDate,callback:function(t){e.$set(e.formInline,"startDate",t)},expression:"formInline.startDate"}})],1),t("el-form-item",{attrs:{label:"结束日期"}},[t("el-date-picker",{attrs:{type:"date",placeholder:"选择日期"},model:{value:e.formInline.endDate,callback:function(t){e.$set(e.formInline,"endDate",t)},expression:"formInline.endDate"}})],1),t("el-form-item"),t("el-form-item"),t("el-form-item")],1),t("div",{staticClass:"btnTab"},[t("el-button",{attrs:{type:"primary",size:"medium",loading:e.getLoading},on:{click:e.getVersion}},[e._v("查询")]),t("el-button",{attrs:{size:"medium"},on:{click:e.reset}},[e._v("重置")])],1),t("el-divider"),t("div",{staticStyle:{"margin-bottom":"20px"}},[t("el-button",{attrs:{type:"primary",size:"medium"},on:{click:e.goContrast}},[e._v("结果对比分析")])],1),t("el-table",{ref:"multipleTable",staticClass:"versionTab",staticStyle:{width:"100%"},attrs:{data:e.tableData,height:e.tableHeight},on:{"selection-change":e.handleSelectionChange}},[t("el-table-column",{attrs:{type:"selection",width:"55"}}),t("el-table-column",{attrs:{label:"任务批次",align:"center",width:"310",prop:"id"}}),t("el-table-column",{attrs:{label:"开始时间",align:"center",prop:"startDate"}}),t("el-table-column",{attrs:{label:"结束时间",align:"center",prop:"endDate"}}),t("el-table-column",{attrs:{label:"状态",align:"center",width:"100",prop:"taskStatus"}}),t("el-table-column",{attrs:{prop:"action",align:"center",label:"操作",width:"150"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("el-button",{attrs:{type:"text"},on:{click:function(t){return e.goCustom(a.row)}}},[e._v("查看结果")]),t("el-button",{attrs:{type:"text"},on:{click:function(t){return e.goLog(a.row)}}},[e._v("查看日志")])]}}])})],1),t("div",{staticClass:"main-content-footer"},[t("el-pagination",{directives:[{name:"show",rawName:"v-show",value:e.total>0,expression:"total > 0"}],staticClass:"pagina",attrs:{total:e.total,page:e.pageNum,limit:e.pageSize},on:{"update:page":function(t){e.pageNum=t},"update:limit":function(t){e.pageSize=t},"current-change":e.handleCurrentChange}})],1),t("el-dialog",{attrs:{title:"结果",visible:e.dialogFormVisible,width:"80%","show-close":""},on:{"update:visible":function(t){e.dialogFormVisible=t}}},["base64"==e.content.returnType?t("span",[t("img",{attrs:{src:e.content.result,alt:"无效"}})]):t("span",[e._v(" "+e._s(e.content.result)+" ")])])],1)},l=[],n=(a("14d9"),a("cf45")),o={data(){return{tableData:[],total:10,pageNum:1,tableHeight:window.innerHeight-286,pageSize:10,typeOptions:[],multipleSelection:[],getLoading:!1,activeName:"second",dialogFormVisible:!1,boxTitle:"复制模型",formInline:{proccnname:"",proctype:"",startDate:"",endDate:""},formLabelWidth:"70px",editorOption:{modules:{toolbar:[["bold","italic","underline","strike"],["blockquote","code-block","image"]]},placeholder:"请输入模型描述"},content:""}},mounted(){this.getVersion(),this.getDir(),this.$nextTick(()=>{const e=["ca-header","main-content-footer","el-table__header-wrapper","el-form demo-form-inline ","el-tabs__header","breadCrumb"];this.tableHeight=Object(n["c"])(e)-40-16-10-85-50})},updated(){this.$nextTick(()=>{const e=["ca-header","main-content-footer","el-table__header-wrapper","el-form demo-form-inline ","el-tabs__header","breadCrumb"];this.tableHeight=Object(n["c"])(e)-40-16-10-85-50})},methods:{onSubmit(){},reset(){this.formInline={proccnname:"",proctype:"",startDate:"",endDate:""}},getVersion(){this.getLoading=!0;var e=[{column:"startDate",type:"geTimeYmd",value:this.formInline.startDate?this.formInline.startDate:""},{column:"endDate",type:"leTimeYmd",value:this.formInline.endDate?this.formInline.endDate:""},{column:"taskId",type:"eq",value:this.$route.params.taskId}];e=encodeURIComponent(JSON.stringify(e));const t=new URLSearchParams({pageNum:this.pageNum,pageSize:this.pageSize}).toString(),a=`/system/system/task-detail/listPage?${t}&condition=${e}`;this.$http.get(a,{}).then(e=>{e&&200===e.code&&(this.tableData=e.data.records.map(e=>this.transform(e)),this.total=e.data.total)}).catch(e=>{console.log(e)}).finally(()=>{this.getLoading=!1})},transform(e){const t=JSON.parse(localStorage.getItem("Dictionary")),a=JSON.parse(localStorage.getItem("DictionaryVal"));let i=t.filter(e=>"执行状态"==e.dicName);i=i[0];const l=a.filter(t=>t.dicCode==i.dicCode&&t.value==e.taskStatus);return l.length&&(i=l[0].label),e.taskStatus=i,e},goContrast(){2==this.multipleSelection.length?this.$router.push({name:"result-chart",params:{itemA:this.multipleSelection[0],itemB:this.multipleSelection[1]}}):this.$message({type:"error",message:"请选择两项数据进行对比"})},handleSelectionChange(e){e.length>2?(this.$message({type:"error",message:"最多只能选择两项进行对比"}),this.$refs.multipleTable.clearSelection()):this.multipleSelection=e},handleCurrentChange(e){this.pageNum=e,this.getVersion()},goLog(e){this.$router.push({name:"task-log",params:e})},getTypeValue(e){const t=this.typeOptions.filter(t=>t.label==e);return t[0].value},goCustom(e){this.dialogFormVisible=!0,this.content=e.executeResult?JSON.parse(e.executeResult):{result:"暂无结果"}},getDir(){const e=JSON.parse(localStorage.getItem("Dictionary")),t=JSON.parse(localStorage.getItem("DictionaryVal"));let a=e.filter(e=>"模型类型"==e.dicName);a=a[0],this.typeOptions=t.filter(e=>e.dicCode==a.dicCode)}}},r=o,s=(a("c824"),a("0c7c")),c=Object(s["a"])(r,i,l,!1,null,"f5ac141a",null);t["default"]=c.exports},c824:function(e,t,a){"use strict";a("e484")},e484:function(e,t,a){}}]);