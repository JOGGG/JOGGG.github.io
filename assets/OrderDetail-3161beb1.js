import{f as y,a9 as N,aF as D,aG as T,au as I,av as $,P as F,aq as g}from"./index-c283c009.js";/* empty css              *//* empty css              *//* empty css              */import"./index-8c6623a3.js";/* empty css              */import{s as V}from"./SimpleHeader-f2f1910e.js";import{a as L,b as U,d as q,p as A}from"./order-32dc3c54.js";import{c as p,m as E,_ as H,a3 as M,r as W,Q as G,o as n,a as w,a2 as o,a9 as _,$ as f,a0 as i,ag as h,F as Q,a1 as R,a7 as u,a5 as j,a6 as z}from"./_plugin-vue_export-helper-730fb40d.js";import{s as J}from"./index-d4a7fbbd.js";import{B as K}from"./index-2cf3f23e.js";import{C as X}from"./index-5206d9e2.js";import"./index-ed6c8d68.js";import"./use-placeholder-ad402fa8.js";import"./index-cc996860.js";let b;const Y={title:"",width:"",theme:null,message:"",overlay:!0,callback:null,teleport:"body",className:"",allowHtml:!1,lockScroll:!0,transition:void 0,beforeClose:null,overlayClass:"",overlayStyle:void 0,messageAlign:"",cancelButtonText:"",cancelButtonColor:null,cancelButtonDisabled:!1,confirmButtonText:"",confirmButtonColor:null,confirmButtonDisabled:!1,showConfirmButton:!0,showCancelButton:!1,closeOnPopstate:!0,closeOnClickOverlay:!1};let Z=y({},Y);function tt(){({instance:b}=D({setup(){const{state:d,toggle:t}=T();return()=>p(J,E(d,{"onUpdate:show":t}),null)}}))}function et(a){return N?new Promise((d,t)=>{b||tt(),b.open(y({},Z,a,{callback:r=>{(r==="confirm"?d:t)(r)}}))}):Promise.resolve()}const C=a=>et(y({showCancelButton:!0},a));const m=a=>(j("data-v-8b4f3923"),a=a(),z(),a),ot={class:"order-detail-box"},st={class:"order-status"},at={class:"status-item"},lt=m(()=>o("label",null,"订单状态：",-1)),rt={class:"status-item"},nt=m(()=>o("label",null,"订单编号：",-1)),it={class:"status-item"},dt=m(()=>o("label",null,"下单时间：",-1)),ct={class:"order-price"},ut={class:"price-item"},pt=m(()=>o("label",null,"商品金额：",-1)),mt=m(()=>o("div",{class:"price-item"},[o("label",null,"配送方式："),o("span",null,"普通快递")],-1)),_t={style:{width:"90%",margin:"0 auto",padding:"20px 0"}},ft={__name:"OrderDetail",setup(a){const d=M(),t=W({detail:{},showPay:!1});G(()=>{r()});const r=async()=>{I({message:"加载中...",forbidClick:!0});const{id:l}=d.query,{data:e}=await L(l);t.detail=e,$()},k=l=>{C({title:"确认取消订单？"}).then(()=>{U(l).then(e=>{e.resultCode==200&&(g("删除成功"),r())})}).catch(()=>{})},B=l=>{C({title:"是否确认订单？"}).then(()=>{q(l).then(e=>{e.resultCode==200&&(g("确认成功"),r())})}).catch(()=>{})},O=()=>{t.showPay=!0},v=async(l,e)=>{await A({orderNo:l,payType:e}),t.showPay=!1,r()},P=()=>{};return(l,e)=>{const c=K,S=X,x=F;return n(),w("div",ot,[p(V,{name:"订单详情",onCallback:P}),o("div",st,[o("div",at,[lt,o("span",null,_(t.detail.orderStatusString),1)]),o("div",rt,[nt,o("span",null,_(t.detail.orderNo),1)]),o("div",it,[dt,o("span",null,_(t.detail.createTime),1)]),t.detail.orderStatus==3?(n(),f(c,{key:0,style:{"margin-bottom":"10px"},color:"#1baeae",block:"",onClick:e[0]||(e[0]=s=>B(t.detail.orderNo))},{default:i(()=>[u("确认收货")]),_:1})):h("",!0),t.detail.orderStatus==0?(n(),f(c,{key:1,style:{"margin-bottom":"10px"},color:"#1baeae",block:"",onClick:O},{default:i(()=>[u("去支付")]),_:1})):h("",!0),t.detail.orderStatus<0||t.detail.orderStatus==4?h("",!0):(n(),f(c,{key:2,block:"",onClick:e[1]||(e[1]=s=>k(t.detail.orderNo))},{default:i(()=>[u("取消订单")]),_:1}))]),o("div",ct,[o("div",ut,[pt,o("span",null,"¥ "+_(t.detail.totalPrice),1)]),mt]),(n(!0),w(Q,null,R(t.detail.newBeeMallOrderItemVOS,s=>(n(),f(S,{key:s.goodsId,style:{background:"#fff"},num:s.goodsCount,price:s.sellingPrice,desc:"全场包邮",title:s.goodsName,thumb:l.$filters.prefix(s.goodsCoverImg)},null,8,["num","price","title","thumb"]))),128)),p(x,{show:t.showPay,"onUpdate:show":e[4]||(e[4]=s=>t.showPay=s),position:"bottom",style:{height:"24%"}},{default:i(()=>[o("div",_t,[p(c,{style:{marginBottom:"10px"},color:"#1989fa",block:"",onClick:e[2]||(e[2]=s=>v(t.detail.orderNo,1))},{default:i(()=>[u("支付宝支付")]),_:1}),p(c,{color:"#4fc08d",block:"",onClick:e[3]||(e[3]=s=>v(t.detail.orderNo,2))},{default:i(()=>[u("微信支付")]),_:1})])]),_:1},8,["show"])])}}},Tt=H(ft,[["__scopeId","data-v-8b4f3923"]]);export{Tt as default};
