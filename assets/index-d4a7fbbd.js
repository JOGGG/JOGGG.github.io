import{c as O,f as R,M as N,n as _,C as F,m as H,t as b,N as K,y as I,D as M,P as U,Q as z,R as y,U as L,V,W as Q,X as W,w as X}from"./index-c283c009.js";import{B as v}from"./index-2cf3f23e.js";import{A as k,a as j}from"./index-ed6c8d68.js";import{d as q,A as G,r as J,c as o,m as Y}from"./_plugin-vue_export-helper-730fb40d.js";const[Z,a,u]=O("dialog"),$=R({},N,{title:String,theme:String,width:_,message:[String,Function],callback:Function,allowHtml:Boolean,className:F,transition:H("van-dialog-bounce"),messageAlign:String,closeOnPopstate:b,showCancelButton:Boolean,cancelButtonText:String,cancelButtonColor:String,cancelButtonDisabled:Boolean,confirmButtonText:String,confirmButtonColor:String,confirmButtonDisabled:Boolean,showConfirmButton:b,closeOnClickOverlay:Boolean}),p=[...K,"transition","closeOnPopstate"];var ee=q({name:Z,props:$,emits:["confirm","cancel","keydown","update:show"],setup(e,{emit:d,slots:l}){const g=G(),i=J({confirm:!1,cancel:!1}),h=n=>d("update:show",n),w=n=>{var t;h(!1),(t=e.callback)==null||t.call(e,n)},C=n=>()=>{e.show&&(d(n),e.beforeClose?(i[n]=!0,W(e.beforeClose,{args:[n],done(){w(n),i[n]=!1},canceled(){i[n]=!1}})):w(n))},f=C("cancel"),m=C("confirm"),x=z(n=>{var t,c;if(n.target!==((c=(t=g.value)==null?void 0:t.popupRef)==null?void 0:c.value))return;({Enter:e.showConfirmButton?m:y,Escape:e.showCancelButton?f:y})[n.key](),d("keydown",n)},["enter","esc"]),P=()=>{const n=l.title?l.title():e.title;if(n)return o("div",{class:a("header",{isolated:!e.message&&!l.default})},[n])},T=n=>{const{message:t,allowHtml:c,messageAlign:s}=e,r=a("message",{"has-title":n,[s]:s}),B=L(t)?t():t;return c&&typeof B=="string"?o("div",{class:r,innerHTML:B},null):o("div",{class:r},[B])},S=()=>{if(l.default)return o("div",{class:a("content")},[l.default()]);const{title:n,message:t,allowHtml:c}=e;if(t){const s=!!(n||l.title);return o("div",{key:c?1:0,class:a("content",{isolated:!s})},[T(s)])}},D=()=>o("div",{class:[Q,a("footer")]},[e.showCancelButton&&o(v,{size:"large",text:e.cancelButtonText||u("cancel"),class:a("cancel"),style:{color:e.cancelButtonColor},loading:i.cancel,disabled:e.cancelButtonDisabled,onClick:f},null),e.showConfirmButton&&o(v,{size:"large",text:e.confirmButtonText||u("confirm"),class:[a("confirm"),{[V]:e.showCancelButton}],style:{color:e.confirmButtonColor},loading:i.confirm,disabled:e.confirmButtonDisabled,onClick:m},null)]),A=()=>o(j,{class:a("footer")},{default:()=>[e.showCancelButton&&o(k,{type:"warning",text:e.cancelButtonText||u("cancel"),class:a("cancel"),color:e.cancelButtonColor,loading:i.cancel,disabled:e.cancelButtonDisabled,onClick:f},null),e.showConfirmButton&&o(k,{type:"danger",text:e.confirmButtonText||u("confirm"),class:a("confirm"),color:e.confirmButtonColor,loading:i.confirm,disabled:e.confirmButtonDisabled,onClick:m},null)]}),E=()=>l.footer?l.footer():e.theme==="round-button"?A():D();return()=>{const{width:n,title:t,theme:c,message:s,className:r}=e;return o(U,Y({ref:g,role:"dialog",class:[a([c]),r],style:{width:M(n)},tabindex:0,"aria-labelledby":t||s,onKeydown:x,"onUpdate:show":h},I(e,p)),{default:()=>[P(),S(),E()]})}}});const le=X(ee);export{le as D,ee as s};
